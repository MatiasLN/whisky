(this.webpackJsonpwhisky=this.webpackJsonpwhisky||[]).push([[0],{18:function(e,t,a){e.exports=a.p+"static/media/placeholder.505dce53.jpeg"},29:function(e,t,a){e.exports=a(46)},34:function(e,t,a){},46:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),l=a(27),r=a.n(l),o=(a(34),a(8)),i=a.n(o),u=a(13),s=a(1),m=a(10);a(47),a(36),a(40);m.initializeApp({apiKey:"AIzaSyBJdh5HQXypjt8x7FNyn3fMSw_AJO3Vpcs",authDomain:"whisky-c2f56.firebaseapp.com",databaseURL:"https://whisky-c2f56.firebaseio.com",projectId:"whisky-c2f56",storageBucket:"whisky-c2f56.appspot.com",messagingSenderId:"166359406379",appId:"1:166359406379:web:baa8f516ec1187e81fd76e"});var d=m.storage(),g=m.firestore(),p=m.firestore.FieldValue.serverTimestamp,f=(new m.auth.GoogleAuthProvider,new m.auth.GoogleAuthProvider),E=m.auth(),h=function(){E.signInWithPopup(f).then((function(){console.log("logged in")})).catch((function(e){console.log(e.message)}))},b=Object(n.createContext)(),v=function(e){var t=e.children,a=Object(n.useState)(""),l=Object(s.a)(a,2),r=l[0],o=l[1];return Object(n.useEffect)((function(){E.onAuthStateChanged(function(){var e=Object(u.a)(i.a.mark((function e(t){var a,n,c,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t&&(a=t.displayName,n=t.email,c=t.photoURL,l=t.uid,o({displayName:a,email:n,photoURL:c,uid:l}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),c.a.createElement(b.Provider,{value:{user:r}},t)},y=a(9),j=a(2),O=a(14),k=Object(n.createContext)(),S=function(e,t){return Object(O.a)(Object(O.a)({},e),t)},N={id:"ioxoXTIksLO2rAedhvHI",whisky:""};function w(e){var t=Object(n.useReducer)(S,N),a=Object(s.a)(t,2),l=a[0],r=a[1];return c.a.createElement(k.Provider,{value:{state:l,update:r}},e.children)}var C=function(e){var t=Object(n.useState)(0),a=Object(s.a)(t,2),c=a[0],l=a[1],r=Object(n.useState)(null),o=Object(s.a)(r,2),m=o[0],f=o[1],E=Object(n.useState)(null),h=Object(s.a)(E,2),v=h[0],y=h[1],j=Object(n.useState)(null),O=Object(s.a)(j,2),k=O[0],S=O[1],N=Object(n.useContext)(b).user.uid;return console.log(N),Object(n.useEffect)((function(){var t=d.ref(e.name),a=g.collection(N);t.put(e).on("state_changed",(function(e){var t=e.bytesTransferred/e.totalBytes*100;l(t)}),(function(e){f(e)}),Object(u.a)(i.a.mark((function e(){var n,c,l,r,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getDownloadURL();case 2:n=e.sent,c=p(),l=localStorage.getItem("title"),r=localStorage.getItem("rating"),o=localStorage.getItem("notes"),a.add({url:n,createdAt:c,title:l,star:r,notes:o}).then((function(e){S(e.id)})).catch((function(e){console.error("Error adding document: ",e)})),y(n);case 9:case"end":return e.stop()}}),e)}))))}),[e]),{progress:c,url:v,error:m,docId:k}},x=function(e){var t=Object(n.useState)([]),a=Object(s.a)(t,2),c=a[0],l=a[1],r=Object(n.useState)(!0),o=Object(s.a)(r,2),i=o[0],u=o[1];return Object(n.useEffect)((function(){var t=g.collection(e).orderBy("createdAt","desc").onSnapshot((function(e){var t=[];e.forEach((function(e){t.push(Object(O.a)(Object(O.a)({},e.data()),{},{id:e.id}))})),l(t),u(!1)}));return function(){return t()}}),[e]),{docs:c,loading:i}},L=function(e){var t=e.isSelected,a=e.setRating;e.click;return c.a.createElement("li",{className:t?"selected":null,onClick:a},c.a.createElement("svg",{x:"0px",y:"0px",viewBox:"0 0 16 15",className:"star"},c.a.createElement("path",{d:"M8.5,0.3l2,4.1c0.1,0.2,0.2,0.3,0.4,0.3l4.6,0.7c0.4,0.1,0.6,0.6,0.3,0.9l-3.3,3.2c-0.1,0.1-0.2,0.3-0.2,0.5l0.8,4.5 c0.1,0.4-0.4,0.8-0.8,0.6l-4.1-2.1c-0.2-0.1-0.3-0.1-0.5,0l-4.1,2.1c-0.4,0.2-0.9-0.1-0.8-0.6l0.8-4.5c0-0.2,0-0.4-0.2-0.5L0.2,6.2 C-0.2,5.9,0,5.4,0.5,5.3L5,4.7c0.2,0,0.3-0.1,0.4-0.3l2-4.1C7.7-0.1,8.3-0.1,8.5,0.3z"})))};var F=function(e){var t=e.rating,a=e.setRating;return c.a.createElement("ul",{className:"stars"},function(){for(var e=[],n=function(n){e.push(c.a.createElement(L,{isSelected:t>n,setRating:function(){return a(n+1)},key:n}))},l=0;l<10;l++)n(l);return e}())},I=a(18),R=a.n(I),q=function(e){var t=e.data;return["localhost","127.0.0.1"].includes(window.location.hostname)?c.a.createElement("img",{src:R.a,alt:t.id}):c.a.createElement("img",{src:t,alt:t.id})},M=function(e){var t=e.data,a=e.setData,l=e.rating,r=e.setRating,o=Object(n.useState)(t.id),i=Object(s.a)(o,2),u=i[0],m=i[1],d=Object(n.useContext)(b),p=Object(n.useContext)(k).update,f=d.user.uid;return c.a.createElement("div",{className:"whiskyItem"},c.a.createElement("div",{className:"image",key:t.id,onClick:function(){m(t.id),a(t),p({id:t.id}),p({whisky:t.title})}},c.a.createElement(y.b,{to:"/whiskyType"},c.a.createElement(q,{data:t.url}))),c.a.createElement("h2",null,t.title),c.a.createElement("div",{className:"rating",onClick:function(){m(t.id)},data:t.id},c.a.createElement(F,{rating:l,setRating:function(e){r(e),g.collection(f).doc(u).update({star:e})}})))},D=function(e){e.data;var t=e.setData,a=(e.rating,e.setRating),l=Object(n.useContext)(b).user.uid,r=x(l),o=r.docs;return!1===r.loading?c.a.createElement("div",{className:"img-grid"},o&&o.map((function(e){return c.a.createElement(M,{key:e.id,data:e,setData:t,rating:e.star,setRating:a})}))):c.a.createElement("p",{className:"loading"},"Laster ...")},z=function(e){var t=e.file,a=e.setFile,l=e.setRating,r=C(t),o=r.url,i=r.progress;return Object(n.useEffect)((function(){o&&(a(null),l(null),document.querySelector("form").style.display="none",document.querySelector(".img-grid").style.display="grid",document.querySelector("#file-title").value="",document.querySelector("#file-notes").value="",document.querySelector(".custom-file-upload").innerHTML="Legg til bilde",document.querySelector(".thumbnail").innerHTML="")}),[o,a]),c.a.createElement("div",{className:"progress-bar",style:{width:i+"%"}})},T=function(){var e=Object(n.useState)(null),t=Object(s.a)(e,2),a=t[0],l=t[1],r=Object(n.useState)(null),o=Object(s.a)(r,2),i=o[0],u=o[1],m=["image/png","image/jpg","image/jpeg","image/heic"],d=Object(n.useState)(0),g=Object(s.a)(d,2),p=g[0],f=g[1],E=Object(n.useState)(""),h=Object(s.a)(E,2),b=h[0],v=h[1];Object(j.f)();var y=function(e){var t=e.currentTarget,a=t.name,n=t.value;"title"===a?localStorage.setItem("title",n):"notes"===a&&localStorage.setItem("notes",n)};return c.a.createElement(c.a.Fragment,null,c.a.createElement("button",{className:"addNewBtn",onClick:function(e){document.querySelector(".uploadForm").style.display="flex",document.querySelector(".img-grid").style.display="none"}},"Legg til ny whisky"),c.a.createElement("form",{className:"uploadForm",method:"post",style:{display:"none"}},c.a.createElement("button",{action:"action",type:"submit",className:"closeForm",onClick:function(e){return function(e){e.preventDefault(),document.querySelector("form").style.display="none",document.querySelector(".img-grid").style.display="grid",document.querySelector("#file-title").value="",document.querySelector("#file-notes").value="",document.querySelector(".custom-file-upload").innerHTML="Legg til bilde",document.querySelector(".thumbnail").innerHTML=""}(e)}},"Lukk"),c.a.createElement("input",{id:"file-title",type:"text",name:"title",placeholder:"Hva heter whiskyen?",onChange:function(e){return y(e)}}),c.a.createElement("textarea",{id:"file-notes",name:"notes",rows:5,cols:5,placeholder:"Smaksnotater ...",onChange:function(e){return y(e)}}),c.a.createElement("div",{className:"starRating"},c.a.createElement(F,{rating:p,setRating:function(e){f(e),localStorage.setItem("rating",e)}})),c.a.createElement("div",{className:"thumbnail"}),c.a.createElement("label",{htmlFor:"file-upload",className:"custom-file-upload"},"Legg til bilde"),c.a.createElement("input",{id:"file-upload",type:"file",onChange:function(e){var t=e.target.files[0];if(t&&m.includes(t.type)){var a=document.createElement("img");a.src=URL.createObjectURL(t),console.log(a),v(t),u(""),document.querySelector(".submitForm").style.display="block",document.querySelector(".thumbnail").innerHTML="",document.querySelector(".thumbnail").appendChild(a),console.log(t),document.querySelector(".custom-file-upload").innerHTML="Velg et annet bilde"}else l(null),u("Du kan bare legge til bildefiler (png, heic or jpeg)")}}),c.a.createElement("div",{className:"output"},i&&c.a.createElement("div",{className:"error"},i),a&&c.a.createElement(z,{file:a,setFile:l,setRating:f}),c.a.createElement("button",{type:"submit",className:"addNewBtn submitForm",onClick:function(e){return function(e){e.preventDefault(),l(b)}(e)}},"Legg til i samlingen"))))},H=function(){var e=Object(n.useState)(null),t=Object(s.a)(e,2),a=t[0],l=t[1],r=Object(n.useState)((function(e){e&&u(e)})),o=Object(s.a)(r,2),i=o[0],u=o[1];return c.a.createElement(c.a.Fragment,null,c.a.createElement(T,null),c.a.createElement(D,{data:a,setData:l,rating:i,setRating:u}))},B=function(e){var t=e.data;return["localhost","127.0.0.1"].includes(window.location.hostname)?c.a.createElement("img",{src:R.a,alt:t}):c.a.createElement("img",{src:t,alt:t})},A=function(e){var t=e.productID,a=e.name,l=e.alcohol,r=e.price,o=e.country,i=e.region,u=e.destilery,s=e.descColour,m=e.descOdour,d=e.descTaste,g=Object(n.useContext)(k).update;return Object(n.useEffect)((function(){g({whisky:t})}),[]),c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"whiskyDetails"},c.a.createElement("h3",null,"Om whiskyen"),c.a.createElement("ul",null,c.a.createElement("li",null,"Navn: ",a),c.a.createElement("li",null,"Produkt ID: ",t),c.a.createElement("li",null,"Alkoholstyrke: ",l+"%"),c.a.createElement("li",null,"Pris: ",r+",- NOK"),c.a.createElement("li",null,"Land: ",o),c.a.createElement("li",null,"Region: ",i),c.a.createElement("li",null,"Destilleri: ",u))),c.a.createElement("div",{className:"whiskyDescription"},c.a.createElement("h3",null,"Beskrivelse"),c.a.createElement("ul",null,c.a.createElement("li",null,"Farge: ",s),c.a.createElement("li",null,"Lukt: ",m),c.a.createElement("li",null,"Smak: ",d))))},P=function(e){var t=e.notFound;return c.a.createElement("div",{className:"getWhiskyInfo"},t?c.a.createElement("p",{className:"noWhiskyData"},"Fant ikke noe data fra Vinmonopolet"):c.a.createElement("p",null,"Stemmer ikke informasjonen?"),c.a.createElement("button",{className:"addNewBtn",onClick:function(){return alert("Her m\xe5 det komme en popup med s\xf8kefelt")}},"Finn produkt"))},V=function(e){var t=e.title,a=function(e){var t=Object(n.useState)(""),a=Object(s.a)(t,2),c=a[0],l=a[1],r=Object(n.useState)(!0),o=Object(s.a)(r,2),m=o[0],d=o[1];return Object(n.useEffect)((function(){(function(){var t=Object(u.a)(i.a.mark((function t(){var a,n,c,r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(a=new Headers).append("Ocp-Apim-Subscription-Key","061c0af40b3740f98c850aa72f2528e1"),n={method:"GET",headers:a,redirect:"follow"},t.next=5,fetch("https://apis.vinmonopolet.no/products/v0/details-normal?productShortNameContains="+e,n);case 5:return c=t.sent,t.next=8,c.json();case 8:r=t.sent,l(r),d(!1);case 11:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[]),{data:c,loading:m}}(t),l=a.data,r=a.loading;return t&&l.length?c.a.createElement(c.a.Fragment,null,r?c.a.createElement("h2",{className:"loadingData"},"Laster inn data fra Vinmonopolet ..."):c.a.createElement("div",{className:"whiskyDetailsContainer"},l&&l.map((function(e){return c.a.createElement(A,{key:e.basic.productId,productID:e.basic.productId,name:e.basic.productLongName,alcohol:e.basic.alcoholContent,price:e.prices[0].salesPrice,country:e.origins.origin.country,region:e.origins.origin.region,destilery:e.logistics.manufacturerName,descColour:e.description.characteristics.colour,descOdour:e.description.characteristics.odour,descTaste:e.description.characteristics.taste})})),c.a.createElement(P,null))):c.a.createElement(c.a.Fragment,null,c.a.createElement(P,{notFound:!0}))},U=function(e){var t=e.url;return c.a.createElement("div",{className:"backdrop",onClick:function(e){e.target.classList.contains("backdrop")&&(document.querySelector(".backdrop").style.display="none")}},c.a.createElement(q,{data:t}))},G=function(){var e=Object(n.useState)(""),t=Object(s.a)(e,2),a=t[0],l=t[1],r=Object(n.useState)(""),o=Object(s.a)(r,2),i=o[0],u=o[1],m=Object(n.useState)(""),d=Object(s.a)(m,2),p=d[0],f=d[1],E=Object(n.useState)(""),h=Object(s.a)(E,2),v=h[0],y=h[1],j=Object(n.useContext)(b),O=Object(n.useContext)(k).state,S=j.user.uid,N=O.whisky.split(" ").join("_"),w=g.collection(S).doc(O.id);Object(n.useEffect)((function(){w.get().then((function(e){l(e.data()),u(e.data().star),f(e.data().notes),y(e.data().url)})).catch((function(e){console.log("Error getting document:",e)}))}),[]);return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"whiskyItem"},c.a.createElement("div",{className:"image",key:O.id,onClick:function(){document.querySelector(".backdrop").style.display="block"}},c.a.createElement(B,{data:a.url})),c.a.createElement("h2",null,a.title),c.a.createElement("div",{className:"notes"},c.a.createElement("textarea",{id:"file-notes",rows:5,cols:5,placeholder:"Smaksnotater ...",value:a.notes,onChange:function(e){f(e.target.value),w.update({notes:p})}})),c.a.createElement("div",{className:"rating"},c.a.createElement(F,{rating:i,setRating:function(e){u(e),w.update({star:e})}})),c.a.createElement(V,{title:N})),c.a.createElement(U,{url:v}))},J=function(){return c.a.createElement("div",{className:"whiskyContainer"},c.a.createElement(G,null))};var W=function(){return c.a.createElement("h1",null,"Siden finnes ikke :(")},K=function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement(y.b,{to:"/"},c.a.createElement("svg",{x:"0px",y:"0px",viewBox:"0 0 480 480",className:"logo"},c.a.createElement("path",{d:"M173.3,203.2l45.6-45.6c3-3.1,3-8.1-0.1-11.2s-8.1-3.1-11.2-0.1l-47.4,47.4c-1.2,1.2-2,2.7-2.2,4.3l-29.5,176.6 c-0.1,0.9-0.1,1.8,0,2.6l10.7,64c0.6,3.9,4,6.7,7.9,6.7c0.4,0,0.9,0,1.3-0.1c4.4-0.7,7.3-4.8,6.6-9.2L144.6,376L173.3,203.2z"}),c.a.createElement("path",{d:"M192,432h-16c-4.4,0-8,3.6-8,8s3.6,8,8,8h16c4.4,0,8-3.6,8-8S196.4,432,192,432z"}),c.a.createElement("path",{d:"M330.3,345.3l5.1,30.7l-9.3,56H224c-4.4,0-8,3.6-8,8s3.6,8,8,8h108.9c3.9,0,7.3-2.8,7.9-6.7l10.7-64 c0.1-0.9,0.1-1.8,0-2.6l-5.3-32c-0.7-4.4-4.8-7.3-9.2-6.6C332.6,336.8,329.6,341,330.3,345.3z"}),c.a.createElement("path",{d:"M261.1,146.3c-3.1,3.1-3.1,8.2,0,11.3l45.6,45.6l19.7,118.1c0.6,3.9,4,6.7,7.9,6.7c0.4,0,0.9,0,1.3-0.1 c4.4-0.7,7.3-4.8,6.6-9.2L322,198.1c-0.3-1.6-1.1-3.2-2.2-4.3l-47.4-47.4C269.3,143.2,264.2,143.2,261.1,146.3z"}),c.a.createElement("path",{d:"M288,8c0-4.4-3.6-8-8-8h-80c-4.4,0-8,3.6-8,8v108.7l-61.7,61.7c-1.2,1.2-2,2.7-2.2,4.3l-32,192 c-0.2,0.9-0.2,1.8,0,2.6l16,96c0.6,3.9,4,6.7,7.9,6.7h240c3.9,0,7.2-2.8,7.9-6.7l16-96c0.2-0.9,0.2-1.8,0-2.6l-32-192 c-0.3-1.6-1.1-3.2-2.2-4.3L288,116.7V8z M208,64h64v16h-24c-4.4,0-8,3.6-8,8s3.6,8,8,8h24v16h-64V64z M208,16h64v32h-64V16z M367.9,376l-14.7,88H126.8l-14.7-88l31.4-188.2l59.8-59.8h73.4l59.8,59.8L367.9,376z"}),c.a.createElement("path",{d:"M184,232v112c0,4.4,3.6,8,8,8h96c4.4,0,8-3.6,8-8V232c0-4.4-3.6-8-8-8h-96C187.6,224,184,227.6,184,232z M200,240h80v96h-80V240z"}),c.a.createElement("path",{d:"M256,256h-32c-4.4,0-8,3.6-8,8s3.6,8,8,8h24v40c0,4.4,3.6,8,8,8c4.4,0,8-3.6,8-8v-48 C264,259.6,260.4,256,256,256z"}))))},X=function(){return c.a.createElement("div",{className:"title"},c.a.createElement("h1",null,"Whisky"))};function _(){if(!Object(n.useContext)(b).user.uid)return c.a.createElement("div",{className:"login-buttons"},c.a.createElement("button",{className:"loginBtn",onClick:h},c.a.createElement("span",null," Logg inn med Google")))}var Q=function(){var e=Object(n.useContext)(b);e=e.user;return c.a.createElement("nav",null,c.a.createElement("img",{src:e.photoURL,alt:e.displayName,onClick:function(){document.querySelector(".userPage").classList.toggle("show")}}))},Y=function(){var e=Object(n.useState)(0),t=Object(s.a)(e,2),a=t[0],l=t[1],r=Object(n.useContext)(b),o=r.user.uid;r=r.user;return g.collection(o).get().then((function(e){l(e.size)})),c.a.createElement(c.a.Fragment,null,c.a.createElement(Q,null),r?c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"userPage"},c.a.createElement("button",{className:"closeNav",onClick:function(){document.querySelector(".userPage").classList.toggle("show")}},"X"),c.a.createElement("div",{className:"userContent"},c.a.createElement("img",{src:r.photoURL,alt:r.displayName}),c.a.createElement("p",null,"Hei ",r.displayName),c.a.createElement("p",null,"Du har smakt ",a," whiskyer"),c.a.createElement("button",{className:"logOutBtn",onClick:function(){E.signOut().then((function(){console.log("logged out"),window.location.reload(!1)})).catch((function(e){console.log(e.message)}))}},"Logg ut")))):null)};var Z=function(){return Object(n.useContext)(b).user.uid?c.a.createElement("div",{className:"MainContent"},c.a.createElement(y.a,null,c.a.createElement(j.c,null,c.a.createElement(w,null,c.a.createElement(K,null),c.a.createElement(Y,null),c.a.createElement(X,null),c.a.createElement(j.a,{path:"/",component:H,exact:!0}),c.a.createElement(j.a,{path:"/whisky",component:H,exact:!0}),c.a.createElement(j.a,{path:"/whiskyType",component:J,exact:!0})),c.a.createElement(j.a,{component:W})))):c.a.createElement(c.a.Fragment,null,c.a.createElement(y.a,null,c.a.createElement(j.c,null,c.a.createElement(K,null),c.a.createElement(X,null),c.a.createElement(_,null))))};var $=function(){return c.a.createElement(v,null,c.a.createElement("div",{className:"App"},c.a.createElement(Z,null)))};r.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement($,null)),document.getElementById("root"))}},[[29,1,2]]]);
//# sourceMappingURL=main.726074a9.chunk.js.map