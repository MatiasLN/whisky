(this.webpackJsonpwhisky=this.webpackJsonpwhisky||[]).push([[0],{18:function(e,t,a){e.exports=a.p+"static/media/placeholder.505dce53.jpeg"},28:function(e,t,a){e.exports=a(45)},33:function(e,t,a){},45:function(e,t,a){"use strict";a.r(t);var l=a(0),n=a.n(l),c=a(26),r=a.n(c),o=(a(33),a(12)),u=a(2),s=a(1),i=a(14),m=Object(l.createContext)(),d=function(e,t){return Object(i.a)(Object(i.a)({},e),t)},p={id:localStorage.getItem("id"),whisky:"",searchResults:"",manual:!1,countedWhiskyData:"",currentWhisky:""};function g(e){var t=Object(l.useReducer)(d,p),a=Object(s.a)(t,2),c=a[0],r=a[1];return n.a.createElement(m.Provider,{value:{state:c,update:r}},e.children)}var E=a(3),h=a.n(E),f=a(5),b=a(10);a(46),a(35),a(39);b.initializeApp({apiKey:"AIzaSyBJdh5HQXypjt8x7FNyn3fMSw_AJO3Vpcs",authDomain:"whisky-c2f56.firebaseapp.com",databaseURL:"https://whisky-c2f56.firebaseio.com",projectId:"whisky-c2f56",storageBucket:"whisky-c2f56.appspot.com",messagingSenderId:"166359406379",appId:"1:166359406379:web:baa8f516ec1187e81fd76e"});var j=b.storage(),O=b.firestore(),y=b.firestore.FieldValue.serverTimestamp,v=(new b.auth.GoogleAuthProvider,new b.auth.GoogleAuthProvider),S=b.auth(),k=function(){S.signInWithPopup(v).then((function(){console.log("logged in")})).catch((function(e){console.log(e.message)}))},N=function(){var e=Object(l.useState)(""),t=Object(s.a)(e,2),a=t[0],n=t[1],c=Object(l.useState)(""),r=Object(s.a)(c,2),o=r[0],u=r[1],i=Object(l.useState)(""),m=Object(s.a)(i,2),d=m[0],p=m[1],g=Object(l.useState)(""),E=Object(s.a)(g,2),b=E[0],j=E[1];return Object(l.useEffect)((function(){var e=localStorage.getItem("displayName"),t=localStorage.getItem("email"),a=localStorage.getItem("photoURL"),l=localStorage.getItem("uid");e&&t&&a&&""!==l?(n(e),u(t),p(a),j(l)):S.onAuthStateChanged(function(){var e=Object(f.a)(h.a.mark((function e(t){var a,l,c,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t&&(a=t.displayName,l=t.email,c=t.photoURL,r=t.uid,console.log("fetching user data"),localStorage.setItem("displayName",a),localStorage.setItem("email",l),localStorage.setItem("photoURL",c),localStorage.setItem("uid",r),n(a),u(l),p(c),j(r));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),{displayName:a,email:o,photoURL:d,uid:b}},_=function(){var e=N().uid,t=Object(l.useState)([]),a=Object(s.a)(t,2),n=a[0],c=a[1],r=Object(l.useState)(!0),o=Object(s.a)(r,2),u=o[0],d=o[1],p=Object(l.useState)([]),g=Object(s.a)(p,2),E=g[0],h=g[1],f=Object(l.useState)([]),b=Object(s.a)(f,2),j=b[0],y=b[1],v=Object(l.useState)([]),S=Object(s.a)(v,2),k=S[0],_=S[1],C=Object(l.useState)([]),x=Object(s.a)(C,2),w=x[0],L=x[1],I=Object(l.useContext)(m).update;return Object(l.useEffect)((function(){if(e){var t=O.collection(e).orderBy("createdAt","desc").onSnapshot((function(e){var t=[],a=[],l=[],n=[],r=[];e.forEach((function(e){a.push(e.data().title),l.push(e.data().polet_destilery),n.push(e.data().polet_country),r.push(e.data().polet_region),t.push(Object(i.a)(Object(i.a)({},e.data()),{},{id:e.id}))})),c(t),d(!1),h(a),y(l),_(n),L(r),I({countedWhiskyData:{titles:a,distillery:l,country:n,region:r}})}));return function(){return t()}}}),[e]),{docs:n,loading:u,titles:E,distilleries:j,countries:k,regions:w}},C=function(e){var t=e.isSelected,a=e.setRating;e.click;return n.a.createElement("li",{className:t?"selected":null,onClick:a},n.a.createElement("svg",{x:"0px",y:"0px",viewBox:"0 0 16 15",className:"star"},n.a.createElement("path",{d:"M8.5,0.3l2,4.1c0.1,0.2,0.2,0.3,0.4,0.3l4.6,0.7c0.4,0.1,0.6,0.6,0.3,0.9l-3.3,3.2c-0.1,0.1-0.2,0.3-0.2,0.5l0.8,4.5 c0.1,0.4-0.4,0.8-0.8,0.6l-4.1-2.1c-0.2-0.1-0.3-0.1-0.5,0l-4.1,2.1c-0.4,0.2-0.9-0.1-0.8-0.6l0.8-4.5c0-0.2,0-0.4-0.2-0.5L0.2,6.2 C-0.2,5.9,0,5.4,0.5,5.3L5,4.7c0.2,0,0.3-0.1,0.4-0.3l2-4.1C7.7-0.1,8.3-0.1,8.5,0.3z"})))};var x=function(e){var t=e.rating,a=e.setRating;return n.a.createElement("ul",{className:"stars"},function(){for(var e=[],l=function(l){e.push(n.a.createElement(C,{isSelected:t>l,setRating:function(){return a(l+1)},key:l}))},c=0;c<10;c++)l(c);return e}())},w=a(18),L=a.n(w),I=function(e){var t=e.data;return["localhost","127.0.0.1"].includes(window.location.hostname)?n.a.createElement("img",{src:L.a,alt:t.id}):n.a.createElement("img",{src:t,alt:t.id})},D=function(e){var t=e.data,a=e.setData,c=e.rating,r=e.setRating,u=e.search,i=Object(l.useState)(t.id),m=Object(s.a)(i,2),d=m[0],p=m[1],g=Object(l.useState)(localStorage.getItem("uid")),E=Object(s.a)(g,1)[0];return t.title.includes(u)?n.a.createElement("div",{className:"whiskyItem"},n.a.createElement("div",{className:"image",key:t.id,onClick:function(){localStorage.setItem("id",t.id),p(t.id),a(t)}},n.a.createElement(o.b,{to:"/whiskyType"},n.a.createElement(I,{data:t.url}))),n.a.createElement("h2",null,t.title),n.a.createElement("div",{className:"rating",onClick:function(){p(t.id)},data:t.id},n.a.createElement(x,{rating:c,setRating:function(e){r(e),O.collection(E).doc(d).update({star:e})}}))):n.a.createElement(n.a.Fragment,null)},V=function(e){e.data;var t=e.setData,a=(e.rating,e.setRating),l=e.search,c=_(),r=c.docs;return!1===c.loading?n.a.createElement(n.a.Fragment,null,n.a.createElement("div",null,n.a.createElement("div",{className:"img-grid"},r&&r.map((function(e){return n.a.createElement(D,{name:e.title,key:e.id,id:e.id,data:e,setData:t,rating:e.star,setRating:a,search:l})}))))):n.a.createElement("p",{className:"loading"},"Laster ...")},F=function(e){var t=Object(l.useState)(0),a=Object(s.a)(t,2),n=a[0],c=a[1],r=Object(l.useState)(null),o=Object(s.a)(r,2),u=o[0],i=o[1],m=Object(l.useState)(null),d=Object(s.a)(m,2),p=d[0],g=d[1],E=Object(l.useState)(null),b=Object(s.a)(E,2),v=b[0],S=b[1],k=Object(l.useState)(localStorage.getItem("uid")),N=Object(s.a)(k,1)[0];return Object(l.useEffect)((function(){var t=j.ref(e.name),a=O.collection(N);t.put(e).on("state_changed",(function(e){var t=e.bytesTransferred/e.totalBytes*100;c(t)}),(function(e){i(e)}),Object(f.a)(h.a.mark((function e(){var l,n,c,r,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getDownloadURL();case 2:l=e.sent,n=y(),c=localStorage.getItem("title"),r=localStorage.getItem("rating"),o=localStorage.getItem("notes"),"","","","","","","","","","",a.add({url:l,createdAt:n,title:c,star:r,notes:o,polet_country:"",polet_descColour:"",polet_descOdour:"",polet_descTaste:"",polet_destilery:"",polet_name:"",polet_percentage:"",polet_price:"",polet_productID:"",polet_region:""}).then((function(e){S(e.id)})).catch((function(e){console.error("Error adding document: ",e)})),g(l),localStorage.setItem("rating",""),localStorage.setItem("notes","");case 21:case"end":return e.stop()}}),e)}))))}),[e,N]),{progress:n,url:p,error:u,docId:v}},R=function(e){var t=e.file,a=e.setFile,c=e.setRating,r=F(t),o=r.url,u=r.progress;return Object(l.useEffect)((function(){o&&(a(null),c(null),document.querySelector("form").style.display="none",document.querySelector(".img-grid").style.display="grid",document.querySelector("#file-title").value="",document.querySelector("#file-notes").value="",document.querySelector(".custom-file-upload").innerHTML="Legg til bilde",document.querySelector(".thumbnail").innerHTML="")}),[o,a,c]),n.a.createElement("div",{className:"progress-bar",style:{width:u+"%"}})},T=function(){var e=Object(l.useState)(null),t=Object(s.a)(e,2),a=t[0],c=t[1],r=Object(l.useState)(null),o=Object(s.a)(r,2),u=o[0],i=o[1],m=["image/png","image/jpg","image/jpeg","image/heic"],d=Object(l.useState)(0),p=Object(s.a)(d,2),g=p[0],E=p[1],h=Object(l.useState)(""),f=Object(s.a)(h,2),b=f[0],j=f[1];var O=function(e){var t=e.currentTarget,a=t.name,l=t.value;"title"===a?(console.log(l),localStorage.setItem("title",l)):"notes"===a&&localStorage.setItem("notes",l)};return n.a.createElement(n.a.Fragment,null,n.a.createElement("button",{className:"addNewBtn",onClick:function(e){document.querySelector(".uploadForm").style.display="flex",document.querySelector(".img-grid").style.display="none"}},"Legg til ny whisky"),n.a.createElement("form",{className:"uploadForm",method:"post",style:{display:"none"}},n.a.createElement("button",{action:"action",type:"submit",className:"closeForm",onClick:function(e){return function(e){e.preventDefault(),document.querySelector("form").style.display="none",document.querySelector(".img-grid").style.display="grid",document.querySelector("#file-title").value="",document.querySelector("#file-title").style.borderColor="#4e4e4e",document.querySelector("#file-notes").value="",document.querySelector(".custom-file-upload").innerHTML="Legg til bilde",document.querySelector(".thumbnail").innerHTML="",document.body.classList.contains("error")&&document.querySelector(".error").remove()}(e)}},"Lukk"),n.a.createElement("input",{id:"file-title",type:"text",name:"title",placeholder:"Hva heter whiskyen?",onChange:function(e){return O(e)}}),n.a.createElement("textarea",{id:"file-notes",name:"notes",rows:5,cols:5,placeholder:"Smaksnotater ...",onChange:function(e){return O(e)}}),n.a.createElement("div",{className:"starRating"},n.a.createElement(x,{rating:g,setRating:function(e){E(e),localStorage.setItem("rating",e)}})),n.a.createElement("div",{className:"thumbnail"}),n.a.createElement("label",{htmlFor:"file-upload",className:"custom-file-upload"},"Legg til bilde"),n.a.createElement("input",{id:"file-upload",type:"file",onChange:function(e){var t=e.target.files[0];if(t&&m.includes(t.type)){var a=document.createElement("img");a.src=URL.createObjectURL(t),j(t),i(""),document.querySelector(".submitForm").style.display="block",document.querySelector(".thumbnail").innerHTML="",document.querySelector(".thumbnail").appendChild(a),document.querySelector(".custom-file-upload").innerHTML="Velg et annet bilde"}else c(null),i("Du kan bare legge til bildefiler (png, heic or jpeg)")}}),n.a.createElement("div",{className:"output"},u&&n.a.createElement("div",{className:"error"},u),a&&n.a.createElement(R,{file:a,setFile:c,setRating:E}),n.a.createElement("button",{type:"submit",className:"addNewBtn submitForm",onClick:function(e){return function(e){if(e.preventDefault(),document.getElementById("file-title").value)c(b);else{var t=document.getElementById("file-title");t.insertAdjacentHTML("afterend","<div class='error'><p>Du m\xe5 legge til en tittel</p></div>"),t.scrollIntoView(),t.style.borderColor="red"}}(e)}},"Legg til i samlingen"))))},q=function(e){var t=e.searchCallback,a=Object(l.useState)(""),c=Object(s.a)(a,2),r=c[0],o=c[1],i=Object(l.useState)(!1),m=Object(s.a)(i,2),d=m[0],p=m[1],g=Object(u.f)();return d&&1===r.length&&g.go(0),n.a.createElement("div",{className:"search"},n.a.createElement("input",{type:"text",name:"search",placeholder:"Filtrer etter navn",onChange:function(e){return function(e){var a=e.currentTarget,l=a.name,n=a.value;"search"===l&&(t(n),o(n))}(e)},onKeyDown:function(e){"Backspace"===e.key&&p(!0)}}))},B=function(){var e=Object(l.useState)(null),t=Object(s.a)(e,2),a=t[0],c=t[1],r=Object(l.useState)((function(e){e&&i(e)})),o=Object(s.a)(r,2),u=o[0],i=o[1],m=Object(l.useState)(""),d=Object(s.a)(m,2),p=d[0],g=d[1];return n.a.createElement(n.a.Fragment,null,n.a.createElement(T,null),n.a.createElement(q,{searchCallback:function(e){console.log(),e&&g(e)}}),n.a.createElement(V,{data:a,setData:c,rating:u,setRating:i,search:p}))},M=function(e){var t=e.data;return["localhost","127.0.0.1"].includes(window.location.hostname)?n.a.createElement("img",{src:L.a,alt:t}):n.a.createElement("img",{src:t,alt:t})},A=function(e){var t=e.productID,a=e.origTitle,c=e.name,r=e.alcohol,o=e.price,u=e.country,i=e.region,d=e.destilery,p=e.descColour,g=e.descOdour,E=e.descTaste,h=Object(l.useContext)(m).state;Object(l.useEffect)((function(){console.log("whiskyId is "+t)}),[h.searchResults]);var f=Object(l.useState)(localStorage.getItem("uid")),b=Object(s.a)(f,1)[0],j=Object(l.useState)(localStorage.getItem("id")),y=Object(s.a)(j,1)[0],v=O.collection(b).doc(y),S=Object(l.useState)(c),k=Object(s.a)(S,2),N=k[0],_=k[1],C=Object(l.useState)(t),x=Object(s.a)(C,2),w=x[0],L=x[1],I=Object(l.useState)(r),D=Object(s.a)(I,2),V=D[0],F=D[1],R=Object(l.useState)(o),T=Object(s.a)(R,2),q=T[0],B=T[1],M=Object(l.useState)(u),A=Object(s.a)(M,2),P=A[0],z=A[1],H=Object(l.useState)(i),U=Object(s.a)(H,2),W=U[0],G=U[1],J=Object(l.useState)(d),K=Object(s.a)(J,2),X=K[0],Q=K[1],Y=Object(l.useState)(E),Z=Object(s.a)(Y,2),$=Z[0],ee=Z[1],te=Object(l.useState)(g),ae=Object(s.a)(te,2),le=ae[0],ne=ae[1],ce=Object(l.useState)(p),re=Object(s.a)(ce,2),oe=re[0],ue=re[1];return Object(l.useEffect)((function(){v.update({polet_name:N,polet_productID:w,polet_percentage:V,polet_price:q,polet_country:P,polet_region:W,polet_destilery:X,polet_descColour:oe,polet_descTaste:$,polet_descOdour:le})}),[N,w,V,q,P,X,W,$,le,oe]),n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"whiskyDetails"},n.a.createElement("h3",null,"Om whiskyen"),n.a.createElement("ul",null,c?n.a.createElement("li",null,n.a.createElement("strong",null,"Navn")," ",c):n.a.createElement("li",null,n.a.createElement("strong",null,"Navn"),n.a.createElement("input",{className:a?"hasValue":"",type:"text",placeholder:a||"Legg til informasjon",onChange:function(e){return _(e.target.value)}})),t?n.a.createElement("li",null,n.a.createElement("strong",null,"Produkt ID")," #",t):n.a.createElement("li",null,n.a.createElement("strong",null,"Produkt ID"),n.a.createElement("input",{className:t?"hasValue":"",type:"text",placeholder:t||"Legg til informasjon",onChange:function(e){return L(e.target.value)}})),r?n.a.createElement("li",null,n.a.createElement("strong",null,"Alkoholstyrke")," ",r," %"):n.a.createElement("li",null,n.a.createElement("strong",null,"Alkoholstyrke"),n.a.createElement("input",{className:r?"hasValue":"",type:"text",placeholder:r||"Legg til informasjon",onChange:function(e){return F(e.target.value)}})),o?n.a.createElement("li",null,n.a.createElement("strong",null,"Pris")," ",o," NOK"):n.a.createElement("li",null,n.a.createElement("strong",null,"Pris"),n.a.createElement("input",{className:o?"hasValue":"",type:"text",placeholder:o||"Legg til informasjon",onChange:function(e){return B(e.target.value)}}))),n.a.createElement("ul",null,u?n.a.createElement("li",null,n.a.createElement("strong",null,"Land")," ",u):n.a.createElement("li",null,n.a.createElement("strong",null,"Land"),n.a.createElement("input",{className:u?"hasValue":"",type:"text",placeholder:u||"Legg til informasjon",onChange:function(e){return z(e.target.value)}})),i?n.a.createElement("li",null,n.a.createElement("strong",null,"Region")," ",i):n.a.createElement("li",null,n.a.createElement("strong",null,"Region"),n.a.createElement("input",{className:i?"hasValue":"",type:"text",placeholder:i||"Legg til informasjon",onChange:function(e){return G(e.target.value)}})),d?n.a.createElement("li",null,n.a.createElement("strong",null,"Destilleri")," ",d):n.a.createElement("li",null,n.a.createElement("strong",null,"Destilleri"),n.a.createElement("input",{className:d?"hasValue":"",type:"text",placeholder:d||"Legg til informasjon",onChange:function(e){return Q(e.target.value)}})))),n.a.createElement("div",{className:"whiskyDescription"},n.a.createElement("h3",null,"Beskrivelse"),n.a.createElement("ul",null,p?n.a.createElement("li",null,n.a.createElement("strong",null,"Farge")," ",p):n.a.createElement("li",null,n.a.createElement("strong",null,"Farge"),n.a.createElement("input",{className:p?"hasValue":"",type:"text",placeholder:p||"Legg til informasjon om fargen",onChange:function(e){return ue(e.target.value)}})),g?n.a.createElement("li",null,n.a.createElement("strong",null,"Lukt")," ",g):n.a.createElement("li",null,n.a.createElement("strong",null,"Lukt"),n.a.createElement("input",{className:g?"hasValue":"",type:"text",placeholder:g||"Legg til informasjon om lukten",onChange:function(e){return ne(e.target.value)}})),E?n.a.createElement("li",null,n.a.createElement("strong",null,"Smak")," ",E):n.a.createElement("li",null,n.a.createElement("strong",null,"Smak"),n.a.createElement("input",{className:E?"hasValue":"",type:"text",placeholder:E||"Legg til informasjon om smaken",onChange:function(e){return ee(e.target.value)}})))))},P=function(e){var t=e.notFound,a=(e.setCallback,Object(l.useState)("")),c=Object(s.a)(a,2),r=c[0],o=c[1],u=Object(l.useState)(""),i=Object(s.a)(u,2),d=i[0],p=i[1],g=Object(l.useState)(!0),E=Object(s.a)(g,2),b=E[0],j=E[1],y=Object(l.useState)(localStorage.getItem("id")),v=Object(s.a)(y,1)[0],S=Object(l.useState)(localStorage.getItem("uid")),k=Object(s.a)(S,1)[0],N=Object(l.useState)(null),_=Object(s.a)(N,2),C=_[0],x=_[1],w=Object(l.useState)(null),L=Object(s.a)(w,2),I=L[0],D=L[1],V=Object(l.useState)(""),F=Object(s.a)(V,2),R=F[0],T=F[1],q=Object(l.useContext)(m).update,B=r.split(" ").join("_"),M=O.collection(k).doc(v);Object(l.useEffect)((function(){B.match(/^\d/)?T("productId="+B):T(B+"&searchType=product&fields=FULL")}),[r]);return Object(l.useEffect)((function(){C&&function(){var e=Object(f.a)(h.a.mark((function e(){var t,a,l,n,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Headers,a={method:"GET",headers:t,redirect:"follow"},e.next=4,fetch("https://www.vinmonopolet.no/api/products/"+C.basic.productId,a);case 4:return l=e.sent,e.next=7,l.json();case 7:n=e.sent,function(){var e=Object(f.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.update({polet_name:n.name,polet_productID:n.code,polet_price:n.price.value,polet_country:n.main_country.name,polet_region:n.district.name});case 2:return e.next=4,q({searchResults:C});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),(c=document.querySelectorAll(".searchResults"))[0].style.display="none",c[1].style.display="none";case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[C]),n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"getWhiskyInfo"},t?n.a.createElement("p",{className:"noWataFound"},"S\xf8k etter produktet hos Vinmonopolet"):n.a.createElement("p",null,"Stemmer ikke informasjonen?"),n.a.createElement("div",{className:"searchForm"},n.a.createElement("input",{type:"text",onChange:function(e){return o(e.target.value)}}),n.a.createElement("button",{className:"addNewBtn search",onClick:function(){(function(){var e=Object(f.a)(h.a.mark((function e(){var t,a,l,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("running manual fetch"),(t=new Headers).append("Access-Control-Allow-Origin","*"),a={method:"GET",headers:t,redirect:"follow"},e.next=6,fetch("https://www.vinmonopolet.no/api/search?q="+R,a);case 6:return l=e.sent,e.next=9,l.json();case 9:(n=e.sent).length?(D(null),p(n)):(D(!0),p(null)),j(!1);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()();var e=document.querySelectorAll(".searchResults");e[0].style.display="block",e[1].style.display="block"}},"Finn riktig produkt")),n.a.createElement("div",{className:"searchResults"},b?n.a.createElement("h3",{className:"loadingData"},"Laster inn data fra Vinmonopolet ..."):n.a.createElement("div",{className:"displayData"},n.a.createElement("ul",null,d&&d.map((function(e){return n.a.createElement("li",{key:e.basic.productId,onClick:function(){x(e)}},e.basic.productShortName)}))),I&&n.a.createElement(n.a.Fragment,null,n.a.createElement("p",null,"Fant dessverre ingen produkter p\xe5 Vinmonopolet som matcher s\xf8ket ditt."),n.a.createElement("button",{className:"addNewBtn",onClick:function(){q({manual:!0})}},"Vil du legge til manuelt?"))))))},z=function(e){var t=e.productID,a=e.origTitle,c=e.name,r=e.alcohol,o=e.price,u=e.country,i=e.region,d=e.destilery,p=e.descColour,g=e.descOdour,E=e.descTaste,h=Object(l.useContext)(m).state;Object(l.useEffect)((function(){console.log("whiskyId is "+t)}),[h.searchResults]);var f=Object(l.useState)(localStorage.getItem("uid")),b=Object(s.a)(f,1)[0],j=Object(l.useState)(localStorage.getItem("id")),y=Object(s.a)(j,1)[0],v=O.collection(b).doc(y),S=Object(l.useState)(c),k=Object(s.a)(S,2),N=k[0],_=k[1],C=Object(l.useState)(""),x=Object(s.a)(C,2),w=x[0],L=x[1],I=Object(l.useState)(""),D=Object(s.a)(I,2),V=D[0],F=D[1],R=Object(l.useState)(""),T=Object(s.a)(R,2),q=T[0],B=T[1],M=Object(l.useState)(""),A=Object(s.a)(M,2),P=A[0],z=A[1],H=Object(l.useState)(""),U=Object(s.a)(H,2),W=U[0],G=U[1],J=Object(l.useState)(""),K=Object(s.a)(J,2),X=K[0],Q=K[1],Y=Object(l.useState)(""),Z=Object(s.a)(Y,2),$=Z[0],ee=Z[1],te=Object(l.useState)(""),ae=Object(s.a)(te,2),le=ae[0],ne=ae[1],ce=Object(l.useState)(""),re=Object(s.a)(ce,2),oe=re[0],ue=re[1];return Object(l.useEffect)((function(){v.update({polet_name:N,polet_productID:w,polet_percentage:V,polet_price:q,polet_country:P,polet_region:W,polet_destilery:X,polet_descColour:oe,polet_descTaste:$,polet_descOdour:le})}),[N,w,V,q,P,X,W,$,le,oe]),n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"whiskyDetails"},n.a.createElement("h3",null,"Om whiskyen"),n.a.createElement("ul",null,c?n.a.createElement("li",null,n.a.createElement("strong",null,"Navn")," ",c):n.a.createElement("li",null,n.a.createElement("strong",null,"Navn"),n.a.createElement("input",{className:a?"hasValue":"",type:"text",placeholder:a||"Legg til informasjon",onChange:function(e){return _(e.target.value)}})),t?n.a.createElement("li",null,n.a.createElement("strong",null,"Produkt ID")," #",t):n.a.createElement("li",null,n.a.createElement("strong",null,"Produkt ID"),n.a.createElement("input",{className:t?"hasValue":"",type:"text",placeholder:t||"Legg til informasjon",onChange:function(e){return L(e.target.value)}})),r?n.a.createElement("li",null,n.a.createElement("strong",null,"Alkoholstyrke")," ",r," %"):n.a.createElement("li",null,n.a.createElement("strong",null,"Alkoholstyrke"),n.a.createElement("input",{className:r?"hasValue":"",type:"text",placeholder:r||"Legg til informasjon",onChange:function(e){return F(e.target.value)}})),o?n.a.createElement("li",null,n.a.createElement("strong",null,"Pris")," ",o," NOK"):n.a.createElement("li",null,n.a.createElement("strong",null,"Pris"),n.a.createElement("input",{className:o?"hasValue":"",type:"text",placeholder:o||"Legg til informasjon",onChange:function(e){return B(e.target.value)}}))),n.a.createElement("ul",null,u?n.a.createElement("li",null,n.a.createElement("strong",null,"Land")," ",u):n.a.createElement("li",null,n.a.createElement("strong",null,"Land"),n.a.createElement("input",{className:u?"hasValue":"",type:"text",placeholder:u||"Legg til informasjon",onChange:function(e){return z(e.target.value)}})),i?n.a.createElement("li",null,n.a.createElement("strong",null,"Region")," ",i):n.a.createElement("li",null,n.a.createElement("strong",null,"Region"),n.a.createElement("input",{className:i?"hasValue":"",type:"text",placeholder:i||"Legg til informasjon",onChange:function(e){return G(e.target.value)}})),d?n.a.createElement("li",null,n.a.createElement("strong",null,"Destilleri")," ",d):n.a.createElement("li",null,n.a.createElement("strong",null,"Destilleri"),n.a.createElement("input",{className:d?"hasValue":"",type:"text",placeholder:d||"Legg til informasjon",onChange:function(e){return Q(e.target.value)}})))),n.a.createElement("div",{className:"whiskyDescription"},n.a.createElement("h3",null,"Beskrivelse"),n.a.createElement("ul",null,p?n.a.createElement("li",null,n.a.createElement("strong",null,"Farge")," ",p):n.a.createElement("li",null,n.a.createElement("strong",null,"Farge"),n.a.createElement("input",{className:p?"hasValue":"",type:"text",placeholder:p||"Legg til informasjon om fargen",onChange:function(e){return ue(e.target.value)}})),g?n.a.createElement("li",null,n.a.createElement("strong",null,"Lukt")," ",g):n.a.createElement("li",null,n.a.createElement("strong",null,"Lukt"),n.a.createElement("input",{className:g?"hasValue":"",type:"text",placeholder:g||"Legg til informasjon om lukten",onChange:function(e){return ne(e.target.value)}})),E?n.a.createElement("li",null,n.a.createElement("strong",null,"Smak")," ",E):n.a.createElement("li",null,n.a.createElement("strong",null,"Smak"),n.a.createElement("input",{className:E?"hasValue":"",type:"text",placeholder:E||"Legg til informasjon om smaken",onChange:function(e){return ee(e.target.value)}})))))},H=function(e){e.name;var t=e.db,a=Object(l.useState)(t.polet_name),c=Object(s.a)(a,2),r=c[0],o=c[1],u=Object(l.useState)(t.polet_productID),i=Object(s.a)(u,2),d=i[0],p=i[1],g=Object(l.useState)(t.polet_percentage),E=Object(s.a)(g,2),b=E[0],j=E[1],y=Object(l.useState)(t.polet_price),v=Object(s.a)(y,2),S=v[0],k=v[1],N=Object(l.useState)(t.polet_country),_=Object(s.a)(N,2),C=_[0],x=_[1],w=Object(l.useState)(t.polet_region),L=Object(s.a)(w,2),I=L[0],D=L[1],V=Object(l.useState)(t.polet_destilery),F=Object(s.a)(V,2),R=F[0],T=F[1],q=Object(l.useState)(t.polet_descColour),B=Object(s.a)(q,2),M=B[0],A=B[1],P=Object(l.useState)(t.polet_descOdour),z=Object(s.a)(P,2),H=z[0],U=z[1],W=Object(l.useState)(t.polet_descTaste),G=Object(s.a)(W,2),J=G[0],K=G[1],X=Object(l.useState)(localStorage.getItem("id")),Q=Object(s.a)(X,1)[0],Y=Object(l.useState)(localStorage.getItem("uid")),Z=Object(s.a)(Y,1)[0],$=Object(l.useState)(null),ee=Object(s.a)($,2),te=ee[0],ae=ee[1],le=Object(l.useContext)(m).update,ne=O.collection(Z).doc(Q);return Object(l.useEffect)((function(){te&&function(){var e=Object(f.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne.update({polet_name:r});case 2:return t.polet_name=r,e.next=5,ne.update({polet_productID:d});case 5:return t.polet_productID=d,e.next=8,ne.update({polet_percentage:b});case 8:return t.polet_percentage=b,e.next=11,ne.update({polet_price:S});case 11:return t.polet_price=S,e.next=14,ne.update({polet_country:C});case 14:return t.polet_country=C,e.next=17,ne.update({polet_region:I});case 17:return t.polet_region=I,e.next=20,ne.update({polet_destilery:R});case 20:return t.polet_destilery=R,e.next=23,ne.update({polet_descColour:M});case 23:return t.polet_descColour=M,e.next=26,ne.update({polet_descTaste:J});case 26:return t.polet_descTaste=J,e.next=29,ne.update({polet_descOdour:H});case 29:return t.polet_descOdour=H,e.next=32,le({manual:!1});case 32:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[te]),n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"whiskyDetailsContainer"},n.a.createElement("div",{className:"whiskyDetails"},n.a.createElement("h3",null,"Om whiskyen"),n.a.createElement("ul",null,n.a.createElement("li",null,n.a.createElement("strong",null,"Navn"),n.a.createElement("input",{className:r?"hasValue":"",id:"input",type:"text",placeholder:r||"Legg til navn",onChange:function(e){return o(e.target.value)}})),n.a.createElement("li",null,n.a.createElement("strong",null,"Produkt ID"),n.a.createElement("input",{className:d?"hasValue":"",type:"text",placeholder:d||"Legg til produkt ID",onChange:function(e){return p(e.target.value)}})),n.a.createElement("li",null,n.a.createElement("strong",null,"Alkoholstyrke"),n.a.createElement("input",{className:b?"hasValue":"",type:"text",placeholder:b||"Legg til % alkoholstyrke",onChange:function(e){return j(e.target.value)}})),n.a.createElement("li",null,n.a.createElement("strong",null,"Pris"),n.a.createElement("input",{className:S?"hasValue":"",type:"text",placeholder:S||"Legg til pris",onChange:function(e){return k(e.target.value)}}))),n.a.createElement("ul",null,n.a.createElement("li",null,n.a.createElement("strong",null,"Land"),n.a.createElement("input",{className:C?"hasValue":"",type:"text",placeholder:C||"Legg til land",onChange:function(e){return x(e.target.value)}})),n.a.createElement("li",null,n.a.createElement("strong",null,"Region"),n.a.createElement("input",{className:I?"hasValue":"",type:"text",placeholder:I||"Legg til region",onChange:function(e){return D(e.target.value)}})),n.a.createElement("li",null,n.a.createElement("strong",null,"Destilleri"),n.a.createElement("input",{className:R?"hasValue":"",type:"text",placeholder:R||"Legg til destilleri",onChange:function(e){return T(e.target.value)}})))),n.a.createElement("div",{className:"whiskyDescription"},n.a.createElement("h3",null,"Beskrivelse"),n.a.createElement("ul",null,n.a.createElement("li",null,n.a.createElement("strong",null,"Farge"),n.a.createElement("input",{className:M?"hasValue":"",type:"text",placeholder:M||"Legg til informasjon om fargen",onChange:function(e){return A(e.target.value)}})),n.a.createElement("li",null,n.a.createElement("strong",null,"Lukt"),n.a.createElement("input",{className:H?"hasValue":"",type:"text",placeholder:H||"Legg til informasjon om lukten",onChange:function(e){return U(e.target.value)}})),n.a.createElement("li",null,n.a.createElement("strong",null,"Smak"),n.a.createElement("input",{className:J?"hasValue":"",type:"text",placeholder:J||"Legg til informasjon om smaken",onChange:function(e){return K(e.target.value)}})))),n.a.createElement("button",{className:"addNewBtn",style:{marginTop:0},onClick:function(){ae(!0)}},"Lagre endringer")))},U=function(e){var t=e.db,a=Object(l.useState)(null),c=Object(s.a)(a,2),r=c[0],o=c[1],u=Object(l.useState)(null),i=Object(s.a)(u,2),m=i[0],d=i[1],p=Object(l.useState)(null),g=Object(s.a)(p,2),E=g[0],h=g[1],f=_(),b=f.distilleries,j=f.countries,O=f.regions;function y(e,t){var a={};e.forEach((function(e){a[e]=(a[e]||0)+1}));for(var l=0,c=Object.entries(a);l<c.length;l++){var r=Object(s.a)(c[l],2),o=r[0],u=r[1];if(t===o)return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",null,n.a.createElement("h2",null,u),n.a.createElement("span",null,"x")),n.a.createElement("p",null,o))}}return Object(l.useEffect)((function(){t.polet_country&&h(y(j,t.polet_country)),t.polet_destilery&&o(y(b,t.polet_destilery)),t.polet_region&&d(y(O,t.polet_region))}),[t,j,b,O]),n.a.createElement("div",{className:"stats"},r?n.a.createElement("div",{className:"destilery"},r):null,m?n.a.createElement("div",{className:"region"},m):null,E?n.a.createElement("div",{className:"country"},E):null)},W=function(e){var t=e.title,a=e.db,c=t;t=t.split(" ").join("_");var r=Object(l.useContext)(m).state;return Object(l.useEffect)((function(){Math.floor(a.polet_price)==a.polet_price?console.log("Integer"):a.polet_price.slice(0,-2)}),[a.polet_price]),!0===r.manual?(console.log("edit data"),n.a.createElement(H,{db:a})):a.polet_percentage||a.polet_country||a.polet_price||a.polet_region||a.polet_descColour?(console.log("has data"),n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"whiskyDetailsContainer"},n.a.createElement(A,{key:a.productID,origTitle:c,productID:a.polet_productID,name:a.polet_name,alcohol:a.polet_percentage,price:a.polet_price,country:a.polet_country,region:a.polet_region,destilery:a.polet_destilery,descColour:a.polet_descColour,descOdour:a.polet_descOdour,descTaste:a.polet_descTaste}),n.a.createElement(P,null)),n.a.createElement("div",{className:"fullWidth"},n.a.createElement(U,{db:a})),n.a.createElement("div",{className:"searchBlock"},n.a.createElement(P,null)))):(console.log("has no data"),n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"whiskyDetailsContainer"},n.a.createElement(z,{name:c}),n.a.createElement(P,null)),n.a.createElement("div",{className:"searchBlock",style:{marginTop:"-50px"}},n.a.createElement(P,null))))},G=function(e){var t=e.url;return n.a.createElement("div",{className:"backdrop",onClick:function(e){e.target.classList.contains("backdrop")&&(document.querySelector(".backdrop").style.display="none")}},n.a.createElement(I,{data:t}))};function J(e){var t=e.title,a=Object(l.useState)(localStorage.getItem("id")),c=Object(s.a)(a,1)[0],r=Object(l.useState)(localStorage.getItem("uid")),o=Object(s.a)(r,1)[0],i=Object(u.f)();return n.a.createElement("div",{className:"deleteItemContainer"},n.a.createElement("div",{className:"deleteItem"},n.a.createElement("p",{className:"deleteText"},"Vil du slette ",t,"?"),n.a.createElement("div",{className:"buttonGroup"},n.a.createElement("button",{className:"deleteButton",onClick:function(){var e=O.collection(o).doc(c);(function(){var t=Object(f.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.delete();case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()(),i.push("/whisky")}},"Ja, slett"),n.a.createElement("button",{className:"closeButton",onClick:function(){document.querySelector(".deleteItemContainer").style.display="none"}},"Nei, g\xe5 tilbake"))))}var K=function(){var e=Object(l.useState)(""),t=Object(s.a)(e,2),a=t[0],c=t[1],r=Object(l.useState)(""),o=Object(s.a)(r,2),u=o[0],i=o[1],d=Object(l.useState)(""),p=Object(s.a)(d,2),g=p[0],E=p[1],h=Object(l.useState)(""),f=Object(s.a)(h,2),b=f[0],j=f[1],y=Object(l.useState)(""),v=Object(s.a)(y,2),S=v[0],k=v[1],N=Object(l.useState)(localStorage.getItem("id")),_=Object(s.a)(N,1)[0],C=Object(l.useState)(localStorage.getItem("uid")),w=Object(s.a)(C,1)[0],L=Object(l.useContext)(m),I=L.state,D=L.update;Object(l.useEffect)((function(){O.collection(w).doc(_).get().then((function(e){c(e.data()),i(e.data().star),E(e.data().notes),j(e.data().url),k(e.data().title),D({currentWhisky:{notes:g,polet_country:e.data().polet_country,polet_descColour:e.data().polet_descColour,polet_descOdour:e.data().polet_descOdour,polet_descTaste:e.data().polet_descTaste,polet_destilery:e.data().polet_destilery,polet_name:e.data().polet_name,polet_percentage:e.data().polet_percentage,polet_price:e.data().polet_price,polet_productID:e.data().polet_productID,polet_region:e.data().polet_region,star:e.data().star,title:e.data().title,url:e.data().url}})})).catch((function(e){console.log("Error getting document:",e)}))}),[I.searchResults,w,_]);return n.a.createElement(n.a.Fragment,null,w?n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"whiskyItem"},n.a.createElement("div",{className:"image",key:_,onClick:function(){document.querySelector(".backdrop").style.display="block"}},n.a.createElement(M,{data:b})),n.a.createElement("div",{className:"titleContainer"},n.a.createElement("h2",null,S),n.a.createElement("div",{className:"buttonGroup"},n.a.createElement("button",{className:"deleteButton",onClick:function(){document.querySelector(".deleteItemContainer").style.display="block"}},"Slett"),n.a.createElement("button",{className:"editButton",onClick:function(){D({manual:!0})}},"Rediger"))),n.a.createElement("div",{className:"notes"},n.a.createElement("textarea",{id:"file-notes",rows:5,cols:5,placeholder:"Smaksnotater ...",value:g||"",onChange:function(e){var t=O.collection(w).doc(_);E(e.target.value),t.update({notes:g})}})),n.a.createElement("div",{className:"rating"},n.a.createElement("h2",{className:"ratingNumber"},u," / 10"),n.a.createElement(x,{rating:u,setRating:function(e){var t=O.collection(w).doc(_);i(e),t.update({star:e})}})),S&&n.a.createElement(W,{title:S,db:a}),n.a.createElement(U,{db:a})),n.a.createElement(G,{url:b}),n.a.createElement(J,{title:S})):n.a.createElement("p",null,"loading ...."))},X=function(){return n.a.createElement("div",{className:"whiskyContainer"},n.a.createElement(K,null))};var Q=function(){return n.a.createElement("h1",null,"Siden finnes ikke :(")},Y=function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(o.b,{to:"/whisky"},n.a.createElement("svg",{x:"0px",y:"0px",viewBox:"0 0 480 480",className:"logo"},n.a.createElement("path",{d:"M173.3,203.2l45.6-45.6c3-3.1,3-8.1-0.1-11.2s-8.1-3.1-11.2-0.1l-47.4,47.4c-1.2,1.2-2,2.7-2.2,4.3l-29.5,176.6 c-0.1,0.9-0.1,1.8,0,2.6l10.7,64c0.6,3.9,4,6.7,7.9,6.7c0.4,0,0.9,0,1.3-0.1c4.4-0.7,7.3-4.8,6.6-9.2L144.6,376L173.3,203.2z"}),n.a.createElement("path",{d:"M192,432h-16c-4.4,0-8,3.6-8,8s3.6,8,8,8h16c4.4,0,8-3.6,8-8S196.4,432,192,432z"}),n.a.createElement("path",{d:"M330.3,345.3l5.1,30.7l-9.3,56H224c-4.4,0-8,3.6-8,8s3.6,8,8,8h108.9c3.9,0,7.3-2.8,7.9-6.7l10.7-64 c0.1-0.9,0.1-1.8,0-2.6l-5.3-32c-0.7-4.4-4.8-7.3-9.2-6.6C332.6,336.8,329.6,341,330.3,345.3z"}),n.a.createElement("path",{d:"M261.1,146.3c-3.1,3.1-3.1,8.2,0,11.3l45.6,45.6l19.7,118.1c0.6,3.9,4,6.7,7.9,6.7c0.4,0,0.9,0,1.3-0.1 c4.4-0.7,7.3-4.8,6.6-9.2L322,198.1c-0.3-1.6-1.1-3.2-2.2-4.3l-47.4-47.4C269.3,143.2,264.2,143.2,261.1,146.3z"}),n.a.createElement("path",{d:"M288,8c0-4.4-3.6-8-8-8h-80c-4.4,0-8,3.6-8,8v108.7l-61.7,61.7c-1.2,1.2-2,2.7-2.2,4.3l-32,192 c-0.2,0.9-0.2,1.8,0,2.6l16,96c0.6,3.9,4,6.7,7.9,6.7h240c3.9,0,7.2-2.8,7.9-6.7l16-96c0.2-0.9,0.2-1.8,0-2.6l-32-192 c-0.3-1.6-1.1-3.2-2.2-4.3L288,116.7V8z M208,64h64v16h-24c-4.4,0-8,3.6-8,8s3.6,8,8,8h24v16h-64V64z M208,16h64v32h-64V16z M367.9,376l-14.7,88H126.8l-14.7-88l31.4-188.2l59.8-59.8h73.4l59.8,59.8L367.9,376z"}),n.a.createElement("path",{d:"M184,232v112c0,4.4,3.6,8,8,8h96c4.4,0,8-3.6,8-8V232c0-4.4-3.6-8-8-8h-96C187.6,224,184,227.6,184,232z M200,240h80v96h-80V240z"}),n.a.createElement("path",{d:"M256,256h-32c-4.4,0-8,3.6-8,8s3.6,8,8,8h24v40c0,4.4,3.6,8,8,8c4.4,0,8-3.6,8-8v-48 C264,259.6,260.4,256,256,256z"})),n.a.createElement("h1",{className:"logoTitle"},"Pet Sematary")))};function Z(){return N().uid?n.a.createElement("p",null,"Sign in"):n.a.createElement("div",{className:"login-buttons"},n.a.createElement("button",{className:"loginBtn",onClick:k},n.a.createElement("span",null," Logg inn med Google")))}var $=function(){var e=N(),t=e.photoURL,a=e.displayName;return n.a.createElement("nav",null,n.a.createElement("img",{src:t,alt:a,onClick:function(){document.querySelector(".userPage").classList.toggle("show")}}))},ee=function(){var e=N(),t=e.uid,a=e.photoURL,l=e.displayName;return n.a.createElement(n.a.Fragment,null,n.a.createElement($,null),t?n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"userPage"},n.a.createElement("button",{className:"closeNav",onClick:function(){document.querySelector(".userPage").classList.toggle("show")}},"X"),n.a.createElement("div",{className:"userContent"},n.a.createElement("img",{src:a,alt:l}),n.a.createElement("p",null,"Hei ",l),n.a.createElement("button",{className:"logOutBtn",onClick:function(){S.signOut().then((function(){console.log("logged out"),window.location.reload(!1)})).catch((function(e){console.log(e.message)}))}},"Logg ut")))):null)};var te=function(){return N().uid?n.a.createElement("div",{className:"MainContent"},n.a.createElement(o.a,null,n.a.createElement(u.c,null,n.a.createElement(g,null,n.a.createElement(Y,null),n.a.createElement(ee,null),n.a.createElement(u.a,{path:"/",component:B,exact:!0}),n.a.createElement(u.a,{path:"/whisky",component:B,exact:!0}),n.a.createElement(u.a,{path:"/whiskyType",component:X,exact:!0})),n.a.createElement(u.a,{component:Q})))):n.a.createElement("div",{className:"notLoggedIn"},n.a.createElement("div",{className:"container"},n.a.createElement("h1",{className:"logoTitle"},"Pet Sematary"),n.a.createElement(Z,null)))};var ae=function(){return n.a.createElement("div",{className:"App"},n.a.createElement(te,null))};r.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(ae,null)),document.getElementById("root"))}},[[28,1,2]]]);
//# sourceMappingURL=main.7dc78cd8.chunk.js.map