(this.webpackJsonpwhisky=this.webpackJsonpwhisky||[]).push([[0],{14:function(e,t,a){e.exports=a.p+"static/media/placeholder.505dce53.jpeg"},15:function(e,t,a){e.exports=a(28)},20:function(e,t,a){},28:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),c=a(13),r=a.n(c),o=(a(20),a(5)),i=a.n(o),s=a(7),u=a(1),m=a(3);a(29),a(22),a(26);m.initializeApp({apiKey:"AIzaSyBJdh5HQXypjt8x7FNyn3fMSw_AJO3Vpcs",authDomain:"whisky-c2f56.firebaseapp.com",databaseURL:"https://whisky-c2f56.firebaseio.com",projectId:"whisky-c2f56",storageBucket:"whisky-c2f56.appspot.com",messagingSenderId:"166359406379",appId:"1:166359406379:web:baa8f516ec1187e81fd76e"});var d=m.storage(),g=m.firestore(),f=m.firestore.FieldValue.serverTimestamp,p=(new m.auth.GoogleAuthProvider,new m.auth.GoogleAuthProvider),h=m.auth(),b=function(){h.signInWithPopup(p).then((function(){console.log("logged in")})).catch((function(e){console.log(e.message)}))},E=Object(n.createContext)(),v=function(e){var t=e.children,a=Object(n.useState)(""),c=Object(u.a)(a,2),r=c[0],o=c[1];return Object(n.useEffect)((function(){h.onAuthStateChanged(function(){var e=Object(s.a)(i.a.mark((function e(t){var a,n,l,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t&&(a=t.displayName,n=t.email,l=t.photoURL,c=t.uid,o({displayName:a,email:n,photoURL:l,uid:c}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),l.a.createElement(E.Provider,{value:{user:r}},t)},y=a(10),S=function(e){var t=Object(n.useState)([]),a=Object(u.a)(t,2),l=a[0],c=a[1];return Object(n.useEffect)((function(){var t=g.collection(e).orderBy("createdAt","desc").onSnapshot((function(e){var t=[];e.forEach((function(e){t.push(Object(y.a)(Object(y.a)({},e.data()),{},{id:e.id}))})),c(t)}));return function(){return t()}}),[e]),{docs:l}},j=function(e){var t=e.isSelected,a=e.setRating;e.click;return l.a.createElement("li",{className:t?"selected":null,onClick:a},l.a.createElement("svg",{x:"0px",y:"0px",viewBox:"0 0 16 15",className:"star"},l.a.createElement("path",{d:"M8.5,0.3l2,4.1c0.1,0.2,0.2,0.3,0.4,0.3l4.6,0.7c0.4,0.1,0.6,0.6,0.3,0.9l-3.3,3.2c-0.1,0.1-0.2,0.3-0.2,0.5l0.8,4.5 c0.1,0.4-0.4,0.8-0.8,0.6l-4.1-2.1c-0.2-0.1-0.3-0.1-0.5,0l-4.1,2.1c-0.4,0.2-0.9-0.1-0.8-0.6l0.8-4.5c0-0.2,0-0.4-0.2-0.5L0.2,6.2 C-0.2,5.9,0,5.4,0.5,5.3L5,4.7c0.2,0,0.3-0.1,0.4-0.3l2-4.1C7.7-0.1,8.3-0.1,8.5,0.3z"})))};var O=function(e){var t=e.rating,a=e.setRating;return l.a.createElement("ul",{className:"stars"},function(){for(var e=[],n=function(n){e.push(l.a.createElement(j,{isSelected:t>n,setRating:function(){return a(n+1)},key:n}))},c=0;c<5;c++)n(c);return e}())},k=a(14),N=a.n(k),L=function(e){var t=e.data;return["localhost","127.0.0.1"].includes(window.location.hostname)?l.a.createElement("img",{src:N.a,alt:t.id}):l.a.createElement("img",{src:t,alt:t.id})},w=function(e){var t=e.data,a=e.setData,c=e.rating,r=e.setRating,o=Object(n.useState)(t.id),i=Object(u.a)(o,2),s=i[0],m=i[1];return l.a.createElement("div",{className:"coffeItem"},l.a.createElement("div",{className:"image",key:t.id,onClick:function(){m(t.id),a(t)}},l.a.createElement(L,{data:t.url})),l.a.createElement("h2",null,t.title),l.a.createElement("div",{className:"rating",onClick:function(){m(t.id)},data:t.id},l.a.createElement(O,{rating:c,setRating:function(e){r(e),g.collection("images").doc(s).update({star:e})}})))},C=function(e){e.data;var t=e.setData,a=(e.rating,e.setRating),n=S("images").docs;return l.a.createElement("div",{className:"img-grid"},n&&n.map((function(e){return l.a.createElement(w,{key:e.id,data:e,setData:t,rating:e.star,setRating:a})})))},R=function(){return l.a.createElement("svg",{x:"0px",y:"0px",viewBox:"0 0 480 480",className:"logo"},l.a.createElement("path",{d:"M173.3,203.2l45.6-45.6c3-3.1,3-8.1-0.1-11.2s-8.1-3.1-11.2-0.1l-47.4,47.4c-1.2,1.2-2,2.7-2.2,4.3l-29.5,176.6 c-0.1,0.9-0.1,1.8,0,2.6l10.7,64c0.6,3.9,4,6.7,7.9,6.7c0.4,0,0.9,0,1.3-0.1c4.4-0.7,7.3-4.8,6.6-9.2L144.6,376L173.3,203.2z"}),l.a.createElement("path",{d:"M192,432h-16c-4.4,0-8,3.6-8,8s3.6,8,8,8h16c4.4,0,8-3.6,8-8S196.4,432,192,432z"}),l.a.createElement("path",{d:"M330.3,345.3l5.1,30.7l-9.3,56H224c-4.4,0-8,3.6-8,8s3.6,8,8,8h108.9c3.9,0,7.3-2.8,7.9-6.7l10.7-64 c0.1-0.9,0.1-1.8,0-2.6l-5.3-32c-0.7-4.4-4.8-7.3-9.2-6.6C332.6,336.8,329.6,341,330.3,345.3z"}),l.a.createElement("path",{d:"M261.1,146.3c-3.1,3.1-3.1,8.2,0,11.3l45.6,45.6l19.7,118.1c0.6,3.9,4,6.7,7.9,6.7c0.4,0,0.9,0,1.3-0.1 c4.4-0.7,7.3-4.8,6.6-9.2L322,198.1c-0.3-1.6-1.1-3.2-2.2-4.3l-47.4-47.4C269.3,143.2,264.2,143.2,261.1,146.3z"}),l.a.createElement("path",{d:"M288,8c0-4.4-3.6-8-8-8h-80c-4.4,0-8,3.6-8,8v108.7l-61.7,61.7c-1.2,1.2-2,2.7-2.2,4.3l-32,192 c-0.2,0.9-0.2,1.8,0,2.6l16,96c0.6,3.9,4,6.7,7.9,6.7h240c3.9,0,7.2-2.8,7.9-6.7l16-96c0.2-0.9,0.2-1.8,0-2.6l-32-192 c-0.3-1.6-1.1-3.2-2.2-4.3L288,116.7V8z M208,64h64v16h-24c-4.4,0-8,3.6-8,8s3.6,8,8,8h24v16h-64V64z M208,16h64v32h-64V16z M367.9,376l-14.7,88H126.8l-14.7-88l31.4-188.2l59.8-59.8h73.4l59.8,59.8L367.9,376z"}),l.a.createElement("path",{d:"M184,232v112c0,4.4,3.6,8,8,8h96c4.4,0,8-3.6,8-8V232c0-4.4-3.6-8-8-8h-96C187.6,224,184,227.6,184,232z M200,240h80v96h-80V240z"}),l.a.createElement("path",{d:"M256,256h-32c-4.4,0-8,3.6-8,8s3.6,8,8,8h24v40c0,4.4,3.6,8,8,8c4.4,0,8-3.6,8-8v-48 C264,259.6,260.4,256,256,256z"}))},q=function(e){var t=e.data,a=e.setData,c=e.initRating,r=e.rating,o=e.setRating,i=Object(n.useState)(t.notes),s=Object(u.a)(i,2),m=s[0],d=s[1],f=Object(n.useState)(t.star),p=Object(u.a)(f,2);r=p[0],o=p[1];return l.a.createElement("div",{className:"backdrop",onClick:function(e){e.target.classList.contains("backdrop")&&a(null)}},l.a.createElement("div",{className:"modal-container"},t.url&&l.a.createElement("div",{className:"modal-img"},l.a.createElement(L,{data:t.url})),l.a.createElement("div",{className:"modal-content"},t.title&&l.a.createElement("h2",null,t.title),l.a.createElement("textarea",{id:"file-notes",rows:5,cols:5,placeholder:"Smaksnotater ...",value:m,onChange:function(e){d(e.target.value),g.collection("images").doc(t.id).update({notes:m})}}),t.star&&l.a.createElement("div",{className:"modal-stars"},l.a.createElement(O,{rating:r,setRating:function(e){o(e),c(e),g.collection("images").doc(t.id).update({star:e})}})))))},x=function(){return l.a.createElement("div",{className:"title"},l.a.createElement("h1",null,"Whisky"))},M=function(e){var t=Object(n.useState)(0),a=Object(u.a)(t,2),l=a[0],c=a[1],r=Object(n.useState)(null),o=Object(u.a)(r,2),m=o[0],p=o[1],h=Object(n.useState)(null),b=Object(u.a)(h,2),E=b[0],v=b[1],y=Object(n.useState)(null),S=Object(u.a)(y,2),j=S[0],O=S[1];return Object(n.useEffect)((function(){var t=d.ref(e.name),a=g.collection("images");t.put(e).on("state_changed",(function(e){var t=e.bytesTransferred/e.totalBytes*100;c(t)}),(function(e){p(e)}),Object(s.a)(i.a.mark((function e(){var n,l,c,r,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getDownloadURL();case 2:n=e.sent,l=f(),c=localStorage.getItem("title"),r=localStorage.getItem("rating"),o=localStorage.getItem("notes"),a.add({url:n,createdAt:l,title:c,star:r,notes:o}).then((function(e){O(e.id)})).catch((function(e){console.error("Error adding document: ",e)})),v(n);case 9:case"end":return e.stop()}}),e)}))))}),[e]),{progress:l,url:E,error:m,docId:j}},z=function(e){var t=e.file,a=e.setFile,c=e.setRating,r=M(t),o=r.url,i=r.progress;return Object(n.useEffect)((function(){o&&(a(null),c(null),document.querySelector("form").style.display="none",document.querySelector(".img-grid").style.display="grid",document.querySelector(".backdrop").style.display="none",document.querySelector("#file-title").value="",document.querySelector("#file-notes").value="",document.querySelector(".custom-file-upload").innerHTML="Legg til bilde",document.querySelector(".thumbnail").innerHTML="")}),[o,a]),l.a.createElement("div",{className:"progress-bar",style:{width:i+"%"}})},I=function(){var e=Object(n.useState)(null),t=Object(u.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)(null),o=Object(u.a)(r,2),i=o[0],s=o[1],m=["image/png","image/jpg","image/jpeg","image/heic"],d=Object(n.useState)(0),g=Object(u.a)(d,2),f=g[0],p=g[1],h=Object(n.useState)(""),b=Object(u.a)(h,2),E=b[0],v=b[1];var y=function(e){var t=e.currentTarget,a=t.name,n=t.value;"title"===a?localStorage.setItem("title",n):"notes"===a&&localStorage.setItem("notes",n)};return l.a.createElement(l.a.Fragment,null,l.a.createElement("button",{className:"addNewBtn",onClick:function(e){document.querySelector(".uploadForm").style.display="flex",document.querySelector(".backdrop").style.display="block",document.querySelector(".img-grid").style.display="none"}},"Legg til ny whisky"),l.a.createElement("div",{className:"backdrop",onClick:function(e){e.target.classList.contains("backdrop")&&(document.querySelector("form").style.display="none",document.querySelector(".img-grid").style.display="grid",document.querySelector(".backdrop").style.display="none",document.querySelector("#file-title").value="",document.querySelector("#file-notes").value="",document.querySelector(".custom-file-upload").innerHTML="Legg til bilde",document.querySelector(".thumbnail").innerHTML="")},style:{display:"none"}},l.a.createElement("form",{className:"uploadForm",style:{display:"none"}},l.a.createElement("input",{id:"file-title",type:"text",name:"title",placeholder:"Hva heter whiskyen?",onChange:function(e){return y(e)}}),l.a.createElement("textarea",{id:"file-notes",name:"notes",rows:5,cols:5,placeholder:"Smaksnotater ...",onChange:function(e){return y(e)}}),l.a.createElement("div",{className:"starRating"},l.a.createElement(O,{rating:f,setRating:function(e){p(e),localStorage.setItem("rating",e)}})),l.a.createElement("div",{className:"thumbnail"}),l.a.createElement("label",{htmlFor:"file-upload",className:"custom-file-upload"},"Legg til bilde"),l.a.createElement("input",{id:"file-upload",type:"file",onChange:function(e){var t=e.target.files[0];if(t&&m.includes(t.type)){var a=document.createElement("img");a.src=URL.createObjectURL(t),console.log(a),v(t),s(""),document.querySelector(".submitForm").style.display="block",document.querySelector(".thumbnail").innerHTML="",document.querySelector(".thumbnail").appendChild(a),console.log(t),document.querySelector(".custom-file-upload").innerHTML="Velg et annet bilde"}else c(null),s("Du kan bare legge til bildefiler (png, heic or jpeg)")}}),l.a.createElement("div",{className:"output"},i&&l.a.createElement("div",{className:"error"},i),a&&l.a.createElement(z,{file:a,setFile:c,setRating:p}),l.a.createElement("button",{type:"submit",className:"addNewBtn submitForm",onClick:function(e){return function(e){e.preventDefault(),c(E)}(e)}},"Legg til i samlingen")))))};function F(){if(!Object(n.useContext)(E).user.uid)return l.a.createElement("div",{className:"login-buttons"},l.a.createElement("button",{className:"loginBtn",onClick:b},l.a.createElement("span",null," Logg inn med Google")))}var B=function(){var e=Object(n.useContext)(E);e=e.user;return l.a.createElement(l.a.Fragment,null,l.a.createElement("nav",null,l.a.createElement("button",{className:"hamburger hamburger--slider",type:"button",onClick:function(){document.querySelector(".hamburger").classList.toggle("is-active"),document.querySelector(".userPage").classList.toggle("show"),document.querySelector("nav").classList.toggle("active")}},l.a.createElement("span",{className:"hamburger-box"},l.a.createElement("span",{className:"hamburger-inner"})))),e?l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"userPage"},l.a.createElement("div",{className:"userContent"},l.a.createElement("img",{src:e.photoURL,alt:e.photoURL}),l.a.createElement("p",null,"Hei ",e.displayName),l.a.createElement("button",{className:"logOutBtn",onClick:function(){h.signOut().then((function(){console.log("logged out"),window.location.reload(!1)})).catch((function(e){console.log(e.message)}))}},"Logg ut")))):null)};var H=function(){var e=function(e){e&&m(e)},t=Object(n.useState)(null),a=Object(u.a)(t,2),c=a[0],r=a[1],o=Object(n.useState)(e),i=Object(u.a)(o,2),s=i[0],m=i[1];return Object(n.useContext)(E).user.uid?l.a.createElement("div",{className:"MainContent"},l.a.createElement(R,null),l.a.createElement(B,null),l.a.createElement(x,null),l.a.createElement(I,null),l.a.createElement(C,{data:c,setData:r,rating:s,setRating:m}),c&&l.a.createElement(q,{data:c,setData:r,initRating:e,rating:s,setRating:m})):l.a.createElement(l.a.Fragment,null,l.a.createElement(R,null),l.a.createElement(x,null),l.a.createElement(F,null))};var D=function(){return l.a.createElement(v,null,l.a.createElement("div",{className:"App"},l.a.createElement(H,null)))};r.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(D,null)),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.846975a5.chunk.js.map